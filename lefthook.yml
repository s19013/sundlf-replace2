pre-commit:
  parallel: true
  commands:
    # laravel
    # pint -> phpstan の順で動かす
    pint-fix:
      priority: 1
      stage_fixed: true
      glob: "*.php"
      exclude: "^_ide_helper.*"
      run: ./.lefthook/pre-commit/pint-fix.sh {staged_files}

    phpstan:
      priority: 2
      glob: "*.php"
      exclude: "^_ide_helper.*"
      run: ./.lefthook/pre-commit/phpstan.sh {staged_files}

    # vue
    #  prettier -> eslint -> typecheckの順で動かす
    prettier-fix:
      priority: 1
      stage_fixed: true
      glob: "*.{ts,tsx,json,css,vue}"
      exclude: ".claude/*"
      run: ./.lefthook/pre-commit/prettier.sh {staged_files}

    eslint-fix:
      priority: 2
      stage_fixed: true
      glob: "*.{ts,tsx,vue}"
      run: ./.lefthook/pre-commit/eslint.sh {staged_files}

    oxlint-fix:
      priority: 3
      stage_fixed: true
      glob: "*.{ts,tsx,vue}"
      run: ./.lefthook/pre-commit/oxlint.sh {staged_files}

pre-push:
  parallel: true
  commands:
    typecheck:
      priority: 1
      stage_fixed: true
      glob: "*.{ts,tsx,vue}"
      exclude: ".claude/*"
      run: "mise exec:vue 'pnpm run type-check-lefthook > typecheck-error.log'"
# テスト系を実行
